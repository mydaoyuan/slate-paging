(this["webpackJsonpslate-paging"]=this["webpackJsonpslate-paging"]||[]).push([[0],{169:function(e,t,o){},244:function(e,t,o){},250:function(e,t,o){"use strict";o.r(t);var n=o(0),a=o.n(n),c=o(36),r=o.n(c),i=(o(169),o(4)),l=o(7),s=o(3),b=o(140),u=o(1),d=o(8),p="page",j=o(12),g={type:"page",children:[{type:"p",children:[{type:"text",text:""}]}]},O=function(e){var t=e.normalizeNode;return function(o){var n=Object(i.a)(o,2),a=n[0],c=n[1];if(console.log("into normalizePage"),u.b.isElement(a)&&"page"===a.type){var r;console.log("into page");try{r=j.d.toDOMNode(e,a)}catch(F){return}var l=u.a.next(e,{at:c})||[],s=Object(i.a)(l,2),b=s[0],d=s[1],p=b&&"page"===a.type&&d,O=window.getComputedStyle(r),h=r.offsetHeight-(parseFloat(O.paddingTop)+parseFloat(O.paddingBottom)),m=0,x=Array.from(r.children);console.log(h,"is pageHeight");var y=0;if(x.forEach((function(t,o){var n=f(t,y),r=n.height,i=n.marginBottom;y=i,(m+=r)>h&&(p&&d?function(e,t,o,n){u.j.moveNodes(e,{at:o,match:function(o){if(!u.a.isEditor(o)&&u.b.isElement(o)&&"page"!==o.type){var n=null;try{n=j.d.findPath(e,o)}catch(a){n=e.selection&&e.selection.anchor.path||[]}return n[1]>=t}return!1},to:n.concat([0])})}(e,o,c,d):function(e,t,o,n){u.j.wrapNodes(e,g,{at:o,split:!0,match:function(o){if(!u.a.isEditor(o)&&u.b.isElement(o)&&"page"!==o.type){var n=null;try{n=j.d.findPath(e,o)}catch(a){n=e.selection&&e.selection.anchor.path||[]}return n[1]>=t}return!1}}),u.j.moveNodes(e,{at:o,match:function(e){return!(u.a.isEditor(e)||!u.b.isElement(e)||"page"!==e.type||e===n)},to:[o[0]+1]})}(e,o,c,a))})),m<h&&b&&d){console.log("if current page have enough height can contain next");var v=h-m,A=j.d.toDOMNode(e,b),w=Array.from(A.children),B=0;w.forEach((function(t,o){var n=f(t,B),a=n.height,r=n.marginBottom;if(B=r,!(v<a)){if((v-=a)<a){var i=c.concat([x.length-1]);!function(e,t,o,n){u.j.moveNodes(e,{at:o,match:function(o){if(!u.a.isEditor(o)&&u.b.isElement(o)&&"page"!==o.type){var n;try{n=j.d.findPath(e,o)}catch(a){return!1}return n[1]<=t}return!1},to:n})}(e,o,d,i)}o===w.length-1&&u.j.removeNodes(e,{at:d})}}))}}return t(o)}};function f(e,t){var o=window.getComputedStyle(e),n=e.clientHeight,a=parseFloat(o.marginBottom),c=Math.max(a-t,0),r=parseFloat(o.marginBottom);return{height:n+(c+r)+(parseFloat(o.paddingBottom)+parseFloat(o.paddingTop))+(parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth)+parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth)),marginBottom:r}}var h=o(5),m=(o(244),o(6)),x=function(e){var t=e.attributes,o=e.children,n=e.nodeProps;return Object(m.jsx)("div",Object(h.a)(Object(h.a)(Object(h.a)({},t),n),{},{className:"custom-page",children:o}))},y="#000",v='songti, "SimSun", STSong',A=function(){return Object(n.useMemo)((function(){var e,t;return t=Object(l.Y)((e={},Object(d.a)(e,p,x),Object(d.a)(e,l.l,Object(l.sb)(l.A,{styles:{root:{color:y,fontFamily:v,fontWeight:600,fontSize:"15.6px",lineHeight:"1.5",margin:"0.33em 0"}}})),Object(d.a)(e,l.p,Object(l.sb)(l.D,{styles:{root:{color:y,fontFamily:v,fontWeight:600,fontSize:"15.6px",lineHeight:"1.5"},text:{textDecoration:"none",opacity:1}}})),Object(d.a)(e,l.h,Object(l.sb)(l.A,{styles:{root:{color:y,fontFamily:v,fontWeight:600,fontSize:"32px",textAlign:"center",lineHeight:"1.4",paddingBottom:"16px"}}})),Object(d.a)(e,l.i,Object(l.sb)(l.A,{styles:{root:{color:y,fontFamily:v,fontWeight:600,fontSize:"18px",textAlign:"center",lineHeight:"1.5"}}})),Object(d.a)(e,l.n,Object(l.sb)(l.A,{as:"td",styles:{root:{backgroundColor:"#fff",color:y,fontFamily:v,border:"1px solid #000",padding:"3px 10px",minWidth:"48px",selectors:{"> *":{margin:0}}}}})),Object(d.a)(e,l.m,Object(l.sb)(l.C,{styles:{root:{border:"2px solid #000"}}})),Object(d.a)(e,l.o,Object(l.sb)(l.A,{as:"th",styles:{root:{color:y,fontFamily:v,backgroundColor:"#fff",border:"1px solid #000",padding:"3px 10px",minWidth:"48px",textAlign:"left",selectors:{"> *":{margin:0}}}}})),Object(d.a)(e,l.y,Object(l.sb)(l.B,{as:"u",styles:{root:{textDecoration:"none",borderBottom:"0.1em solid",paddingBottom:"0.15em"}}})),Object(d.a)(e,l.e,Object(l.sb)(l.A,{styles:{root:{textAlign:"right !important",selectors:{"> *":{textAlign:"right !important"}}}}})),Object(d.a)(e,l.b,Object(l.sb)(l.A,{styles:{root:{textAlign:"center"}}})),Object(d.a)(e,l.c,Object(l.sb)(l.A,{styles:{root:{textAlign:"justify !important",selectors:{"> *":{textAlign:"justify !important"}}}}})),Object(d.a)(e,l.d,Object(l.sb)(l.A,{styles:{root:{textAlign:"left !important",selectors:{"> *":{textAlign:"left !important"}}}}})),e)),Object(l.rb)(t,[{key:l.l,placeholder:"\u8f93\u5165\u6587\u5b57...",hideOnBlur:!0}])}),[])},w=(o(245),o(246),o(155),o(153),o(152),o(156),o(158),o(157),o(160),o(161),o(159),o(148),o(150),o(147),o(149),o(97)),B=o(98),F=(o(145),o(146),o(151),o(99)),S=(o(154),o(141),o(144),o(41),function(){var e=Object(s.s)(Object(s.r)("focus")),t={arrow:!0,delay:0,duration:[200,0],hideOnClick:!1,offset:[0,17],placement:"top"};return Object(m.jsxs)(l.a,{direction:"top",hiddenDelay:0,theme:"dark",arrow:!1,children:[Object(m.jsx)(l.H,{type:Object(l.nb)(e,l.s),icon:Object(m.jsx)(w.a,{}),tooltip:Object(h.a)({content:"Bold (\u2318B)"},t)}),Object(m.jsx)(l.H,{type:Object(l.nb)(e,l.t),icon:Object(m.jsx)(B.a,{}),tooltip:Object(h.a)({content:"Italic (\u2318I)"},t)}),Object(m.jsx)(l.H,{type:Object(l.nb)(e,l.y),icon:Object(m.jsx)(F.a,{}),tooltip:Object(h.a)({content:"Underline (\u2318U)"},t)})]})}),k={types:[l.f,l.p],defaultType:l.l},C={rules:[Object(h.a)(Object(h.a)({},k),{},{hotkey:"Enter",predicate:l.pb}),Object(h.a)(Object(h.a)({},k),{},{hotkey:"Backspace",predicate:l.qb})]},P={rules:[{hotkey:"mod+enter",level:1},{hotkey:"mod+shift+enter",before:!0,level:1},{hotkey:"enter",query:{start:!0,end:!0,allow:l.r}}]},N={rules:[{hotkey:"shift+enter"},{hotkey:"enter",query:{allow:[l.g,l.f,l.n]}}]},E=a.a.createContext({}),D={state:{},page:1,headerValue:"",footerValue:"",headerAttribute:{},footerAttribute:{}},T=a.a.createContext({data:D,setPageData:function(){},setData:function(){}}),V=function(e){var t=Object(n.useState)(D),o=Object(i.a)(t,2),a=o[0],c=o[1],r=Object(n.useMemo)((function(){return{data:a,setData:function(e){console.log(e,"\u7f16\u8f91\u5668\u7684\u6570\u636e");for(var t=0,o=0;o<e.length;o++){"page"===e[o].type&&(t+=1)}var n=Object(h.a)(Object(h.a)({},a),{},{page:t});c(n)},setPageData:function(e){c(e)}}}),[a,c]);return Object(m.jsx)(T.Provider,{value:r,children:e.children})},H=o(248),z={escape:/{{([^{][\s\S]+?[^}])}}/g,interpolate:/{{{([\s\S]+?)}}}/g};function W(e){var t=e.value,o=e.changeValue,a=e.className,c=void 0===a?"":a,r=e.placeholder,l=e.style,s=e.page,b=Object(n.useState)({focus:!1,compileValue:""}),u=Object(i.a)(b,2),d=u[0],p=u[1],j=Object(n.useCallback)((function(e){var t="";try{var o=H(e,z)({page:s});console.log(o,"is value  compile"),t=o}catch(n){console.log(" \u65e0\u6548  \u53d8\u91cf \u5440\u5144\u5f1f is value  compile"),t="\u65e0\u6548\u8868\u8fbe\u5f0f"}return t=t.replaceAll(" ","\xa0")}),[s]);Object(n.useEffect)((function(){var e=j(t);p((function(t){return t.compileValue=e,t}))}),[t,j]);return Object(m.jsxs)("div",{className:d.focus?"".concat(c," page-input-warp active"):"".concat(c," page-input-warp"),style:l||{},children:[d.focus?Object(m.jsx)("input",{className:"page-input",value:t,autoFocus:!0,onChange:function(e){console.log("changeHeader"),o(e.target.value)},onBlur:function(){p(Object(h.a)(Object(h.a)({},d),{},{focus:!1,compileValue:j(t)}))},type:"text"}):null,Object(m.jsx)("div",{className:"page-content",style:{display:d.focus?"none":"block",fontSize:"14px"},onClick:function(){p(Object(h.a)(Object(h.a)({},d),{},{focus:!0}))},children:d.compileValue||r})]})}function M(e){var t=Object(n.useContext)(T),o=t.data,a=new Array(o.page).fill(""),c=function(e){t.setPageData(Object(h.a)(Object(h.a)({},o),{},{headerValue:e}))},r=function(e){t.setPageData(Object(h.a)(Object(h.a)({},o),{},{footerValue:e}))};return Object(m.jsx)("div",{className:"paging-com",children:a.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsx)(W,{style:{top:1122*t+0+"px"},changeValue:c,page:o.page,value:o.headerValue,placeholder:"\u70b9\u51fb\u8f93\u5165\u9875\u7709"}),Object(m.jsx)(W,{style:{top:1122*(t+1)+0-44+"px"},changeValue:r,page:o.page,value:o.footerValue,placeholder:"\u70b9\u51fb\u8f93\u5165\u9875\u811a"})]},"page-warp"+t)}))})}var L=function(e){var t=e.config,o=(e.eventBus,t.model),a=t.id,c=Object(n.useRef)(null),r=Object(b.useReactToPrint)({content:function(){return c.current},removeAfterPrint:!1});Object(n.useEffect)((function(){window.handlePrint=r}),[r]);var d=[{type:"page",children:[{type:"h1",children:[{text:"\ud83c\udf6a Deserialize HTML"}]},{type:"p",children:[{text:"By default, pasting content into a Slate editor will use the clipboard's "},{text:"'text/plain'",code:!0},{text:" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle "},{text:"'text/html'",code:!0},{text:" data. "}]}]}],j=A(),g=Object(l.Z)(),f=function(){var e=Object(n.useMemo)((function(){var e=[Object(l.ab)(),Object(l.S)(),Object(l.X)(),Object(l.ib)(),Object(l.Q)(),Object(l.V)(),{pluginKeys:p,renderElement:Object(s.j)(p),withOverrides:function(e){var t=e.insertText;return e.normalizeNode=O(e),e.insertText=function(e){console.log("insertText",e),t(e)},e}},Object(l.hb)(),Object(l.L)(),Object(l.M)(),Object(l.N)(),Object(l.T)(),Object(l.R)(),Object(l.jb)(),Object(l.eb)(),Object(l.fb)(),Object(l.gb)(),Object(l.U)(),Object(l.W)(),Object(l.bb)(C),Object(l.db)(N),Object(l.P)(P),Object(l.cb)({allow:l.j})];return e.push(Object(l.O)({plugins:e})),e}),[]),o=Object(n.useContext)(T),c=Object(s.s)(),r=Object(n.useState)(d),b=Object(i.a)(r,2),f=b[0];b[1];return console.log(o,"pageContext====="),Object(m.jsx)(E.Provider,{value:t,children:Object(m.jsxs)(l.z,{id:a,plugins:e,onChange:function(e){console.log(e),c&&u.a.normalize(c),console.log("normalize \u5f00\u59cb\u62c9"),o.setData(e)},components:j,options:g,editableProps:{style:{width:"794px",minHeight:"500px",outline:"1px solid rgb(238, 238, 238)"}},initialValue:f,children:[Object(m.jsx)(S,{}),Object(m.jsx)(M,{})]})})};return Object(m.jsx)("div",{ref:c,className:"read"===o?"readmodel-editor slate-editor-core":"slate-editor-core",children:Object(m.jsx)(V,{children:Object(m.jsx)(f,{})})})},I=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,261)).then((function(t){var o=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;o(e),n(e),a(e),c(e),r(e)}))};r.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(L,{config:{model:"desc",id:"udos"}})}),document.getElementById("root")),I()}},[[250,1,2]]]);
//# sourceMappingURL=main.774cb05a.chunk.js.map