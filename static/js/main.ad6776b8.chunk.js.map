{"version":3,"sources":["plugins/page/defaults.ts","plugins/page/normalizers/normalizePage.ts","plugins/page/withPage.ts","plugins/page-ui/PageElement.tsx","styledComponents.ts","newplugin.tsx","config/pluginOptions.ts","env.tsx","components/paging/formatting.ts","components/paging/Pageheader.tsx","components/paging/index.tsx","initData.js","App.tsx","plugins/page/createPagePlugin.ts","reportWebVitals.ts","index.tsx"],"names":["ELEMENT_PAGE","emptyPage","type","children","matchTag","dirtyNodes","Set","asyncPromise","Promise","resolve","isPageNormalize","setTimeRunClearn","timer","setTimeout","clear","heightWeakMap","WeakMap","computeRun","editor","pageNode","console","time","size","Array","from","shift","delete","pageElement","getDom","path","getPath","nextPagePath","nextPageNodeEntry","Editor","node","error","log","nextPageNode","hasNextPage","countPageHeight","pageHeight","getPageHeight","get","getElementChildHeight","isOverStep","overIndex","index","moveChildToNextPage","updateDirtyNode","createPageAndMove","set","empytHeiht","nextPageElement","nextPageChildren","preElementBottomMargin","length","computeItemHeight","childHeight","height","marginBottom","riseElementToPrevPage","concat","Transforms","removeNodes","at","timeEnd","then","has","add","element","ReactEditor","findPath","nodeElement","toDOMNode","PageNode","style","window","getComputedStyle","offsetHeight","parseFloat","paddingTop","paddingBottom","dom","mergeMargin","clientHeight","marginTop","mergeMarginVal","Math","max","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","splitIndex","formPath","toPath","nodePathIndex","moveNodes","match","n","isEditor","Element","isElement","includes","to","entryNode","wrapNodes","split","withPage","insertText","normalizeNode","entry","previous","prevNode","normalizePage","text","PageElement","attributes","nodeProps","className","FONT_COLOR","FONT_FAMILY","useStyledComponents","useMemo","components","createPlateComponents","ELEMENT_PARAGRAPH","withProps","StyledElement","styles","root","color","fontFamily","fontWeight","fontSize","lineHeight","margin","ELEMENT_TODO_LI","TodoListElement","textDecoration","opacity","ELEMENT_H1","textAlign","ELEMENT_H2","ELEMENT_TD","as","backgroundColor","border","padding","minWidth","selectors","ELEMENT_TABLE","TableElement","ELEMENT_TH","MARK_UNDERLINE","StyledLeaf","borderBottom","ELEMENT_ALIGN_RIGHT","ELEMENT_ALIGN_CENTER","ELEMENT_ALIGN_JUSTIFY","ELEMENT_ALIGN_LEFT","withPlaceholders","key","placeholder","hideOnBlur","ToolbarButtonsBasicElements","useStoreEditorRef","useEventEditorId","getPlatePluginType","icon","ToolbarButtonsList","ELEMENT_UL","ELEMENT_OL","ToolbarButtonsAlign","ToolbarButtonsBasicMarks","MARK_BOLD","MARK_ITALIC","MARK_STRIKETHROUGH","MARK_SUPERSCRIPT","MARK_SUBSCRIPT","ToolbarButtonsTable","transform","insertTable","deleteTable","addRow","deleteRow","addColumn","deleteColumn","BallonToolbarMarks","tooltip","arrow","delay","duration","hideOnClick","offset","placement","direction","hiddenDelay","theme","content","resetBlockTypesCommonRule","types","ELEMENT_BLOCKQUOTE","defaultType","optionsResetBlockTypePlugin","rules","hotkey","predicate","isBlockAboveEmpty","isSelectionAtBlockStart","optionsExitBreakPlugin","level","before","query","start","end","allow","KEYS_HEADING","optionsSoftBreakPlugin","ELEMENT_CODE_BLOCK","pageInfo","state","page","headerAttribute","data","formatFunIndex","value","showPage","footerAttribute","PageContext","React","createContext","PageDispatchContext","dispatchPageInfo","dispatchPageEidtor","PageProvider","useState","setData","dispatchPageEditInfo","useCallback","val","prev","Provider","pageOption","number2text","all","number","confs","lower","num","unit","upper","maxNumber","Number","conf","integer","String","levels","reverse","reduce","pre","item","idx","unshift","_integer","_level","_item","join","replace","slice","Option","Select","FormLayout","forwardRef","ref","cancel","submit","initValue","Form","useForm","form","useImperativeHandle","getFormData","getFieldsValue","initialValues","layout","Item","name","label","allowClear","map","Group","img","src","alt","onClick","PageHeader","top","isHeader","pageContext","useContext","dataKey","context","current","modelOpen","setState","inputRef","createRef","refForm","useRef","syncContext","formData","obj","dialogContenet","pageText","findex","fn","useEffect","focus","title","onDoubleClick","userSelect","disabled","bordered","onChange","e","target","position","visible","trigger","onVisibleChange","Paging","arrs","fill","v","code","id","initialValuePasteHtml","initData","styledComponents","defaultOptions","createPlateOptions","pluginsMemo","plugins","createReactPlugin","createHistoryPlugin","createParagraphPlugin","createTodoListPlugin","createHeadingPlugin","createListPlugin","pluginKeys","renderElement","getRenderElement","withOverrides","createTablePlugin","createAlignPlugin","createBoldPlugin","createCodePlugin","createItalicPlugin","createHighlightPlugin","createUnderlinePlugin","createStrikethroughPlugin","createSubscriptPlugin","createSuperscriptPlugin","createKbdPlugin","createNodeIdPlugin","createResetNodePlugin","createSoftBreakPlugin","createExitBreakPlugin","createSelectOnBackspacePlugin","ELEMENT_IMAGE","push","createDeserializeHTMLPlugin","slateEditor","normalize","options","editableProps","width","minHeight","outline","initialValue","RichText","config","modelenv","eventBus","model","componentRef","handlePrint","useReactToPrint","removeAfterPrint","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","document","getElementById"],"mappings":"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","file":"static/js/main.ad6776b8.chunk.js","sourcesContent":["export const ELEMENT_PAGE = 'page'\n","import { Transforms, Element, Node, Editor, Path, NodeEntry } from 'slate'\nimport { ReactEditor } from 'slate-react'\nimport { SPEditor } from '@udecode/plate-core'\n\nconst emptyPage = {\n  type: 'page',\n  children: []\n}\n// 进行移动操作的匹配tag\nconst matchTag = ['h1', 'h2', 'p', 'ul', 'ol', 'table']\nconst dirtyNodes: Set<any> = new Set()\nlet asyncPromise = Promise.resolve()\nlet isPageNormalize = false\n\nconst setTimeRunClearn = (() => {\n  let timer: null | Number\n  return () => {\n    if (!timer) {\n      timer = setTimeout(() => {\n        isPageNormalize = false\n        dirtyNodes.clear()\n        timer = null\n      })\n    }\n  }\n})()\n\n// TODO 需要更加细粒度的存储。 存储 element 级别的高度  应该可以快一点的\nconst heightWeakMap = new WeakMap()\n\n// TODO\n/**\n * 如果当前只有一页，或者当前不存在page 元素，需要包裹一个 page 元素\n */\n\n/**\n * 在编辑器进行 normalize 的时候\n *  1、记录下当前 normalize 的 page 元素，为了防止分页修改，把上下页的 page 元素 也要记录下来\n *  2、normalize 完，react 操作 DOM 后就可以访问到 DOM 数据。 进行高度计算\n *    2.1、 为了能够在操作 DOM 再进行高度判断， 设置了个状态  isPageNormalize。\n *          isPageNormalize 用来判断是否是 DOM 高度分页造成的 normalize 触发，\n *          这种情况下就不需要再记录 page 元素了，否则会无限循环\n * 3、当前页面高度累加超出当前页面高度，则后续的元素都需要移动到下一页\n * 4、当前页面高度累加不足，且存在下页，则需要把下一页元素向上移动\n */\n\nexport const normalizePage = (editor: ReactEditor & SPEditor) => {\n  // can include custom normalisations---\n  const { normalizeNode } = editor\n  return (entry: any) => {\n    let [node, path] = entry\n    // if the node is Page\n    if (Element.isElement(node) && (node as any).type === 'page') {\n      if (!isPageNormalize && !dirtyNodes.size) {\n        // 等待操作了 DOM 后，进行计算 DOM 位置信息\n        asyncPromise.then(() => {\n          computeRun(editor)\n        })\n      }\n      if (!isPageNormalize) {\n        // 前一页要变脏，上一页是空的，下一页要补上\n        if (!dirtyNodes.size) {\n          const [prevNode] =\n            Editor.previous(editor, {\n              at: path\n            }) || []\n          if (prevNode) {\n            !dirtyNodes.has(prevNode) && dirtyNodes.add(prevNode)\n          }\n        }\n        !dirtyNodes.has(node) && dirtyNodes.add(node)\n      }\n      return\n    }\n\n    // Fall back to the original `normalizeNode` to enforce other constraints.\n    return normalizeNode(entry)\n  }\n}\n\nconst computeRun = (editor: any) => {\n  // console.log(dirtyNodes.size, 'dirtyNodesdirtyNodes 长度')\n  // 清除状态\n  setTimeRunClearn()\n  isPageNormalize = true\n  let pageNode: any\n  // 遍历page\n  console.time('while 循环')\n  while (dirtyNodes.size) {\n    const dirtyNodesArr = Array.from(dirtyNodes)\n    pageNode = dirtyNodesArr.shift()\n    dirtyNodes.delete(pageNode)\n    const pageElement = getDom(editor, pageNode)\n    const path = getPath(editor, pageNode)\n    if (!path || !pageElement) {\n      break\n    }\n    const nextPagePath = [path[0] + 1]\n    let nextPageNodeEntry: NodeEntry<Node> | undefined\n    try {\n      nextPageNodeEntry = Editor.node(editor, nextPagePath) // 还是要基于 slate 的数据结构\n    } catch (error) {\n      console.log(nextPagePath, '没有这个slate 节点，已经是最后一个节点了')\n    }\n    const nextPageNode: any = nextPageNodeEntry && nextPageNodeEntry[0]\n    const hasNextPage = !!nextPageNode // 还是要基于 slate 的数据结构\n    let countPageHeight = 0\n    // 进入高度计算\n    const pageHeight = getPageHeight(pageElement)\n    if (heightWeakMap.get(pageNode)) {\n      console.error('获取到了缓存')\n      countPageHeight = heightWeakMap.get(pageNode)\n    } else {\n      console.log('没有缓存')\n      const {\n        isOverStep,\n        index: overIndex,\n        countPageHeight: newCountPageHeight\n      } = getElementChildHeight(pageElement, countPageHeight, pageHeight)\n      countPageHeight = newCountPageHeight\n      if (isOverStep && overIndex) {\n        if (hasNextPage && nextPagePath) {\n          moveChildToNextPage(editor, overIndex, path, nextPagePath)\n          updateDirtyNode(editor, nextPagePath)\n          // 后续所有元素进行迁移，停止循环\n          break\n        } else {\n          createPageAndMove(editor, overIndex, path, pageNode)\n          // 后续所有元素进行迁移，停止循环\n          break\n        }\n      }\n      heightWeakMap.set(pageNode, countPageHeight)\n    }\n\n    const prevPageNeedFill =\n      countPageHeight < pageHeight &&\n      hasNextPage &&\n      nextPagePath &&\n      nextPageNode\n    // if current page have enough height can contain next page first child node,\n    //  we need move this node\n    if (prevPageNeedFill) {\n      // console.log('if current page have enough height can contain next')\n      let empytHeiht = pageHeight - countPageHeight\n      let nextPageElement = getDom(editor, nextPageNode)\n      if (!nextPageElement) {\n        break\n      }\n      const nextPageChildren = Array.from(nextPageElement.children)\n      // top bottom margin merge\n      let preElementBottomMargin = 0\n      for (let index = 0; index < nextPageChildren.length; index++) {\n        const nextPageChildNode = nextPageChildren[index]\n        const { height: childHeight, marginBottom } = computeItemHeight(\n          nextPageChildNode,\n          preElementBottomMargin\n        )\n        preElementBottomMargin = marginBottom\n        if (empytHeiht < childHeight) break\n        empytHeiht = empytHeiht - childHeight\n        const toPath = path.concat([pageNode.children.length])\n        // 提升当前的 DOM\n        debugger\n        riseElementToPrevPage(editor, index, nextPagePath, toPath)\n        // if move done, this page is empty, remove this page\n        if (index === nextPageChildren.length - 1) {\n          Transforms.removeNodes(editor, {\n            at: nextPagePath\n          })\n        }\n      }\n    }\n  }\n  console.timeEnd('while 循环')\n}\n\n/**\n * 添加需要计算的 Node\n * @param editor\n * @param path\n */\nfunction updateDirtyNode(editor: ReactEditor & SPEditor, path: any) {\n  Promise.resolve()\n    .then(() => {\n      let nextPageNodeEntry: NodeEntry<Node> | undefined\n      try {\n        nextPageNodeEntry = Editor.node(editor, path) // 还是要基于 slate 的数据结构\n      } catch (error) {\n        console.error(error)\n      }\n      const nextPageNode = nextPageNodeEntry && nextPageNodeEntry[0]\n      !dirtyNodes.has(nextPageNode) && dirtyNodes.add(nextPageNode)\n      return Promise.resolve()\n    })\n    .then(() => {\n      computeRun(editor)\n    })\n}\n\nfunction getElementChildHeight(\n  element: HTMLElement,\n  countPageHeight: number,\n  pageHeight: number\n) {\n  const children: globalThis.Element[] = Array.from(element.children)\n  // top bottom margin merge\n  let preElementBottomMargin = 0\n  for (let index = 0; index < children.length; index++) {\n    const child = children[index]\n    const { height: childHeight, marginBottom } = computeItemHeight(\n      child,\n      preElementBottomMargin\n    )\n    preElementBottomMargin = marginBottom\n    countPageHeight = countPageHeight + childHeight\n    if (countPageHeight > pageHeight) {\n      return { isOverStep: true, index, countPageHeight }\n    }\n  }\n  return { isOverStep: false, countPageHeight }\n}\n\n/**\n * trycatch 获取path\n * @param editor\n * @param node\n * @returns\n */\nfunction getPath(editor: ReactEditor & SPEditor, node: Node) {\n  let path\n  try {\n    path = ReactEditor.findPath(editor, node)\n  } catch (error) {\n    console.log(error)\n  }\n  return path\n}\n/**\n * try catch 获取 DOM\n * @param editor\n * @param node\n * @returns\n */\nfunction getDom(editor: ReactEditor & SPEditor, node: Node) {\n  let nodeElement\n  try {\n    nodeElement = ReactEditor.toDOMNode(editor, node)\n  } catch (error) {\n    console.error('DOM 转换失败', error)\n  }\n  return nodeElement\n}\n\n// 进入高度计算\nfunction getPageHeight(PageNode: HTMLElement) {\n  const style = window.getComputedStyle(PageNode)\n  const computedHeight = PageNode.offsetHeight\n  const padding =\n    parseFloat(style.paddingTop || '0') + parseFloat(style.paddingBottom || '0')\n\n  const pageHeight = computedHeight - padding\n  return pageHeight\n}\n\nfunction computeItemHeight(\n  dom: globalThis.Element,\n  mergeMargin: number\n): {\n  height: number\n  marginBottom: number\n} {\n  const style = window.getComputedStyle(dom)\n  const clientHeight = dom.clientHeight\n  const marginTop = parseFloat(style.marginBottom)\n  const mergeMarginVal = Math.max(marginTop - mergeMargin, 0)\n  const marginBottom = parseFloat(style.marginBottom)\n  const margin = mergeMarginVal + marginBottom\n  const padding = parseFloat(style.paddingBottom) + parseFloat(style.paddingTop)\n  const border =\n    parseFloat(style.borderLeftWidth) +\n    parseFloat(style.borderRightWidth) +\n    parseFloat(style.borderTopWidth) +\n    parseFloat(style.borderBottomWidth)\n\n  const height = clientHeight + margin + padding + border\n  return { height, marginBottom: marginBottom }\n}\n\nfunction moveChildToNextPage(\n  editor: ReactEditor,\n  splitIndex: number,\n  formPath: Path,\n  toPath: Path\n): void {\n  console.log('moveChildToNextPage')\n  let nodePathIndex = 0\n  Transforms.moveNodes(editor, {\n    at: formPath,\n    match(n) {\n      if (\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        matchTag.includes((n as any).type)\n      ) {\n        return nodePathIndex++ >= splitIndex\n      }\n      return false\n    },\n    to: toPath.concat([0])\n  })\n}\n\nfunction createPageAndMove(\n  editor: ReactEditor,\n  splitIndex: number,\n  formPath: Path,\n  entryNode: Node\n) {\n  console.log('createPageAndMove')\n  // use index record nodes path, because node cant find path in this time.\n  let nodePathIndex = 0\n  // need create page node\n  Transforms.wrapNodes(editor, emptyPage, {\n    at: formPath,\n    split: true,\n    match(n) {\n      if (\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        matchTag.includes((n as any).type)\n      ) {\n        // console.log((n as any).type, nodePathIndex, splitIndex)\n        return nodePathIndex++ >= splitIndex\n      }\n      return false\n    }\n  })\n  Transforms.moveNodes(editor, {\n    at: formPath,\n    match(n) {\n      if (\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        (n as any).type === 'page' &&\n        n !== entryNode\n      ) {\n        return true\n      }\n      return false\n    },\n    to: [formPath[0] + 1]\n  })\n}\n\nfunction riseElementToPrevPage(\n  editor: ReactEditor,\n  splitIndex: number,\n  formPath: Path,\n  toPath: Path\n) {\n  console.log('riseElementToPrevPage')\n  Transforms.moveNodes(editor, {\n    at: formPath,\n    // eslint-disable-next-line space-before-function-paren\n    match(n) {\n      if (\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        matchTag.includes((n as any).type) &&\n        (n as any).type !== 'page'\n      ) {\n        let path\n        try {\n          path = ReactEditor.findPath(editor, n)\n        } catch (error) {\n          return false\n        }\n        return path[1] <= splitIndex\n      }\n      return false\n    },\n    to: toPath // move to previous page last position\n  })\n}\n","import { SPEditor, WithOverride } from '@udecode/plate-core'\nimport { normalizePage } from './normalizers/normalizePage'\nimport { ReactEditor } from 'slate-react'\n\n// import { ELEMENT_LINE } from './defaults'\n\nexport const withPage =\n  (): WithOverride<ReactEditor & SPEditor> => (editor) => {\n    const { insertText } = editor\n    editor.normalizeNode = normalizePage(editor)\n    editor.insertText = (text) => {\n      console.log('insertText', text)\n      // debugger\n      insertText(text)\n    }\n    return editor\n  }\n","import * as React from 'react'\nimport { StyledElementProps } from '@udecode/plate-styled-components'\nimport './page.css'\nexport const PageElement = ({\n  attributes,\n  children,\n  nodeProps\n}: StyledElementProps) => {\n  return (\n    <div {...attributes} {...nodeProps} className='custom-page'>\n      {children}\n    </div>\n  )\n}\n","import { useMemo } from 'react'\nimport {\n  withPlaceholders,\n  createPlateComponents,\n  withProps,\n  // CodeBlockElement,\n  TableElement,\n  StyledElement,\n  TodoListElement,\n  StyledLeaf,\n  // ELEMENT_CODE_BLOCK,\n  ELEMENT_H1,\n  ELEMENT_H2,\n  ELEMENT_TD,\n  ELEMENT_TH,\n  ELEMENT_TABLE,\n  ELEMENT_TODO_LI,\n  ELEMENT_PARAGRAPH,\n  ELEMENT_ALIGN_RIGHT,\n  ELEMENT_ALIGN_CENTER,\n  ELEMENT_ALIGN_JUSTIFY,\n  ELEMENT_ALIGN_LEFT,\n  MARK_UNDERLINE\n} from '@udecode/plate'\n\nimport { ELEMENT_PAGE } from './plugins/page'\nimport { PageElement } from './plugins/page-ui'\n\nexport const withStyledPlaceHolders = (components: any) =>\n  withPlaceholders(components, [\n    {\n      key: ELEMENT_PARAGRAPH,\n      placeholder: '输入文字...',\n      hideOnBlur: true\n    }\n  ])\nconst FONT_COLOR = '#000'\nconst FONT_FAMILY = 'songti, \"SimSun\", STSong'\nconst useStyledComponents = () => {\n  return useMemo(() => {\n    return withStyledPlaceHolders(\n      createPlateComponents({\n        [ELEMENT_PAGE]: PageElement as any,\n        [ELEMENT_PARAGRAPH]: withProps(StyledElement, {\n          styles: {\n            root: {\n              color: FONT_COLOR,\n              fontFamily: FONT_FAMILY,\n              fontWeight: 600,\n              fontSize: '15.6px',\n              // fontSize: '18px',\n              lineHeight: '1.5',\n              margin: '0.33em 0'\n            }\n          }\n        }),\n        [ELEMENT_TODO_LI]: withProps(TodoListElement, {\n          styles: {\n            root: {\n              color: FONT_COLOR,\n              fontFamily: FONT_FAMILY,\n              fontWeight: 600,\n              fontSize: '15.6px',\n              lineHeight: '1.5'\n            },\n            text: {\n              textDecoration: 'none',\n              opacity: 1\n            }\n          }\n        }),\n        [ELEMENT_H1]: withProps(StyledElement, {\n          styles: {\n            root: {\n              color: FONT_COLOR,\n              fontFamily: FONT_FAMILY,\n              fontWeight: 600,\n              fontSize: '32px',\n              textAlign: 'center',\n              lineHeight: '1.4',\n              paddingBottom: '16px'\n            }\n          }\n        }),\n        [ELEMENT_H2]: withProps(StyledElement, {\n          styles: {\n            root: {\n              color: FONT_COLOR,\n              fontFamily: FONT_FAMILY,\n              fontWeight: 600,\n              fontSize: '18px',\n              textAlign: 'center',\n              lineHeight: '1.5'\n            }\n          }\n        }),\n        [ELEMENT_TD]: withProps(StyledElement, {\n          as: 'td',\n          styles: {\n            root: {\n              backgroundColor: '#fff',\n              color: FONT_COLOR,\n              fontFamily: FONT_FAMILY,\n              border: '1px solid #000',\n              padding: '3px 10px',\n              minWidth: '48px',\n              selectors: {\n                '> *': {\n                  margin: 0\n                }\n              }\n            }\n          }\n        }),\n        [ELEMENT_TABLE]: withProps(TableElement, {\n          styles: {\n            root: {\n              border: '2px solid #000'\n            }\n          }\n        }),\n        [ELEMENT_TH]: withProps(StyledElement, {\n          as: 'th',\n          styles: {\n            root: {\n              color: FONT_COLOR,\n              fontFamily: FONT_FAMILY,\n              backgroundColor: '#fff',\n              border: '1px solid #000',\n              padding: '3px 10px',\n              minWidth: '48px',\n              textAlign: 'left',\n              selectors: {\n                '> *': {\n                  margin: 0\n                }\n              }\n            }\n          }\n        }),\n        [MARK_UNDERLINE]: withProps(StyledLeaf, {\n          as: 'u',\n          styles: {\n            root: {\n              textDecoration: 'none',\n              // backgroundImage: 'linear-gradient(to top, currentColor, currentColor 0.1em, transparent 0.1em)',\n              borderBottom: '0.1em solid',\n              paddingBottom: '0.15em'\n            }\n          }\n        }),\n        [ELEMENT_ALIGN_RIGHT]: withProps(StyledElement, {\n          styles: {\n            root: {\n              textAlign: 'right !important',\n              selectors: {\n                '> *': {\n                  textAlign: 'right !important'\n                }\n              }\n            }\n          }\n        }),\n        [ELEMENT_ALIGN_CENTER]: withProps(StyledElement, {\n          styles: {\n            root: {\n              textAlign: 'center'\n            }\n          }\n        }),\n        [ELEMENT_ALIGN_JUSTIFY]: withProps(StyledElement, {\n          styles: {\n            root: {\n              textAlign: 'justify !important',\n              selectors: {\n                '> *': {\n                  textAlign: 'justify !important'\n                }\n              }\n            }\n          }\n        }),\n        [ELEMENT_ALIGN_LEFT]: withProps(StyledElement, {\n          styles: {\n            root: {\n              textAlign: 'left !important',\n              selectors: {\n                '> *': {\n                  textAlign: 'left !important'\n                }\n              }\n            }\n          }\n        })\n      })\n    )\n  }, [])\n}\n\nexport default useStyledComponents\n","/* eslint-disable */\nimport 'tippy.js/animations/scale.css'\nimport 'tippy.js/dist/tippy.css'\nimport React from 'react'\nimport { MoveHorizontal } from '@styled-icons/boxicons-regular/MoveHorizontal'\nimport { ListAlt } from '@styled-icons/material/ListAlt'\nimport { CheckBox } from '@styled-icons/material/CheckBox'\nimport { Highlight } from '@styled-icons/boxicons-regular/Highlight'\nimport { Subscript } from '@styled-icons/foundation/Subscript'\nimport { Superscript } from '@styled-icons/foundation/Superscript'\nimport { BorderAll } from '@styled-icons/material/BorderAll'\nimport { BorderBottom } from '@styled-icons/material/BorderBottom'\nimport { BorderClear } from '@styled-icons/material/BorderClear'\nimport { BorderLeft } from '@styled-icons/material/BorderLeft'\nimport { BorderRight } from '@styled-icons/material/BorderRight'\nimport { BorderTop } from '@styled-icons/material/BorderTop'\nimport { FormatAlignCenter } from '@styled-icons/material/FormatAlignCenter'\nimport { FormatAlignJustify } from '@styled-icons/material/FormatAlignJustify'\nimport { FormatAlignLeft } from '@styled-icons/material/FormatAlignLeft'\nimport { FormatAlignRight } from '@styled-icons/material/FormatAlignRight'\nimport { FormatBold } from '@styled-icons/material/FormatBold'\nimport { FormatItalic } from '@styled-icons/material/FormatItalic'\nimport { FormatListBulleted } from '@styled-icons/material/FormatListBulleted'\nimport { FormatListNumbered } from '@styled-icons/material/FormatListNumbered'\nimport { FormatQuote } from '@styled-icons/material/FormatQuote'\nimport { FormatStrikethrough } from '@styled-icons/material/FormatStrikethrough'\nimport { FormatUnderlined } from '@styled-icons/material/FormatUnderlined'\nimport { Keyboard } from '@styled-icons/material/Keyboard'\nimport { LooksOne } from '@styled-icons/material/LooksOne'\nimport { LooksTwo } from '@styled-icons/material/LooksTwo'\nimport { TippyProps } from '@tippyjs/react'\nimport {\n  addColumn,\n  addRow,\n  BalloonToolbar,\n  deleteColumn,\n  deleteRow,\n  deleteTable,\n  ELEMENT_ALIGN_LEFT,\n  ELEMENT_ALIGN_CENTER,\n  ELEMENT_ALIGN_JUSTIFY,\n  ELEMENT_ALIGN_RIGHT,\n  ELEMENT_BLOCKQUOTE,\n  ELEMENT_H1,\n  ELEMENT_H2,\n  ELEMENT_H3,\n  ELEMENT_H4,\n  ELEMENT_H5,\n  ELEMENT_H6,\n  ELEMENT_OL,\n  ELEMENT_UL,\n  getPlatePluginType,\n  insertTable,\n  MARK_BOLD,\n  MARK_CODE,\n  MARK_ITALIC,\n  MARK_KBD,\n  MARK_STRIKETHROUGH,\n  MARK_SUBSCRIPT,\n  MARK_SUPERSCRIPT,\n  MARK_UNDERLINE,\n  ToolbarAlign,\n  ToolbarElement,\n  ToolbarList,\n  ToolbarMark,\n  ToolbarTable\n} from '@udecode/plate'\nimport { ELEMENT_CODE_BLOCK } from '@udecode/plate-code-block'\nimport { ToolbarCodeBlock } from '@udecode/plate-code-block-ui'\nimport { useEventEditorId, useStoreEditorRef } from '@udecode/plate-core'\nimport { MARK_HIGHLIGHT } from '@udecode/plate-highlight'\n\nexport const ToolbarButtonsBasicElements = () => {\n  const editor = useStoreEditorRef(useEventEditorId('focus'))\n  console.log('i am run render ToolbarButtonsBasicElements')\n  return (\n    <>\n      <ToolbarElement\n        type={getPlatePluginType(editor, ELEMENT_H1)}\n        icon={<LooksOne />}\n      />\n      <ToolbarElement\n        type={getPlatePluginType(editor, ELEMENT_H2)}\n        icon={<LooksTwo />}\n      />\n\n      {/* <ToolbarElement type={getPlatePluginType(editor, ELEMENT_H3)} icon={<Looks3 />} />\n      <ToolbarElement type={getPlatePluginType(editor, ELEMENT_H4)} icon={<Looks4 />} />\n      <ToolbarElement type={getPlatePluginType(editor, ELEMENT_H5)} icon={<Looks5 />} />\n      <ToolbarElement type={getPlatePluginType(editor, ELEMENT_H6)} icon={<Looks6 />} /> */}\n      {/* <ToolbarElement type={getPlatePluginType(editor, ELEMENT_BLOCKQUOTE)} icon={<FormatQuote />} /> */}\n      {/* <ToolbarCodeBlock type={getPlatePluginType(editor, ELEMENT_CODE_BLOCK)} icon={<CodeBlock />} /> */}\n    </>\n  )\n}\n\nexport const ToolbarButtonsList = () => {\n  const editor = useStoreEditorRef(useEventEditorId('focus'))\n\n  return (\n    <>\n      <ToolbarList\n        type={getPlatePluginType(editor, ELEMENT_UL)}\n        icon={<FormatListBulleted />}\n      />\n      <ToolbarList\n        type={getPlatePluginType(editor, ELEMENT_OL)}\n        icon={<FormatListNumbered />}\n      />\n    </>\n  )\n}\n\nexport const ToolbarButtonsAlign = () => {\n  const editor = useStoreEditorRef(useEventEditorId('focus'))\n\n  return (\n    <>\n      <ToolbarAlign\n        type={getPlatePluginType(editor, ELEMENT_ALIGN_LEFT)}\n        icon={<FormatAlignLeft />}\n      />\n      <ToolbarAlign\n        type={getPlatePluginType(editor, ELEMENT_ALIGN_CENTER)}\n        icon={<FormatAlignCenter />}\n      />\n      <ToolbarAlign\n        type={getPlatePluginType(editor, ELEMENT_ALIGN_RIGHT)}\n        icon={<FormatAlignRight />}\n      />\n      <ToolbarAlign\n        type={getPlatePluginType(editor, ELEMENT_ALIGN_JUSTIFY)}\n        icon={<FormatAlignJustify />}\n      />\n    </>\n  )\n}\n\nexport const ToolbarButtonsBasicMarks = () => {\n  const editor = useStoreEditorRef(useEventEditorId('focus'))\n\n  return (\n    <>\n      <ToolbarMark\n        type={getPlatePluginType(editor, MARK_BOLD)}\n        icon={<FormatBold />}\n      />\n      <ToolbarMark\n        type={getPlatePluginType(editor, MARK_ITALIC)}\n        icon={<FormatItalic />}\n      />\n      <ToolbarMark\n        type={getPlatePluginType(editor, MARK_UNDERLINE)}\n        icon={<FormatUnderlined />}\n      />\n      <ToolbarMark\n        type={getPlatePluginType(editor, MARK_STRIKETHROUGH)}\n        icon={<FormatStrikethrough />}\n      />\n      <ToolbarMark\n        type={getPlatePluginType(editor, MARK_SUPERSCRIPT)}\n        clear={getPlatePluginType(editor, MARK_SUBSCRIPT)}\n        icon={<Superscript />}\n      />\n      <ToolbarMark\n        type={getPlatePluginType(editor, MARK_SUBSCRIPT)}\n        clear={getPlatePluginType(editor, MARK_SUPERSCRIPT)}\n        icon={<Subscript />}\n      />\n    </>\n  )\n}\n\nexport const ToolbarKbd = () => {\n  const editor = useStoreEditorRef(useEventEditorId('focus'))\n\n  return (\n    <ToolbarMark\n      type={getPlatePluginType(editor, MARK_KBD)}\n      icon={<Keyboard />}\n    />\n  )\n}\n\nexport const ToolbarHighlight = () => {\n  const editor = useStoreEditorRef(useEventEditorId('focus'))\n\n  return (\n    <ToolbarMark\n      type={getPlatePluginType(editor, MARK_HIGHLIGHT)}\n      icon={<Highlight />}\n    />\n  )\n}\n\nexport const ToolbarButtonsTable = () => (\n  <>\n    <ToolbarTable icon={<BorderAll />} transform={insertTable} />\n    <ToolbarTable icon={<BorderClear />} transform={deleteTable} />\n    <ToolbarTable icon={<BorderBottom />} transform={addRow} />\n    <ToolbarTable icon={<BorderTop />} transform={deleteRow} />\n    <ToolbarTable icon={<BorderLeft />} transform={addColumn} />\n    <ToolbarTable icon={<BorderRight />} transform={deleteColumn} />\n  </>\n)\n\nexport const BallonToolbarMarks = () => {\n  const editor = useStoreEditorRef(useEventEditorId('focus'))\n\n  const arrow = false\n  const theme = 'dark'\n  const direction = 'top'\n  const hiddenDelay = 0\n  const tooltip: TippyProps = {\n    arrow: true,\n    delay: 0,\n    duration: [200, 0],\n    hideOnClick: false,\n    offset: [0, 17],\n    placement: 'top'\n  }\n\n  return (\n    <BalloonToolbar\n      direction={direction}\n      hiddenDelay={hiddenDelay}\n      theme={theme}\n      arrow={arrow}\n    >\n      <ToolbarMark\n        type={getPlatePluginType(editor, MARK_BOLD)}\n        icon={<FormatBold />}\n        tooltip={{ content: 'Bold (⌘B)', ...tooltip }}\n      />\n      <ToolbarMark\n        type={getPlatePluginType(editor, MARK_ITALIC)}\n        icon={<FormatItalic />}\n        tooltip={{ content: 'Italic (⌘I)', ...tooltip }}\n      />\n      <ToolbarMark\n        type={getPlatePluginType(editor, MARK_UNDERLINE)}\n        icon={<FormatUnderlined />}\n        tooltip={{ content: 'Underline (⌘U)', ...tooltip }}\n      />\n    </BalloonToolbar>\n  )\n}\n","import {\n  ExitBreakPluginOptions,\n  ELEMENT_PARAGRAPH,\n  KEYS_HEADING,\n  ELEMENT_TD,\n  ELEMENT_BLOCKQUOTE,\n  ELEMENT_CODE_BLOCK,\n  ELEMENT_TODO_LI,\n  ResetBlockTypePluginOptions,\n  isBlockAboveEmpty,\n  isSelectionAtBlockStart,\n  SoftBreakPluginOptions\n} from '@udecode/plate'\n\nconst resetBlockTypesCommonRule = {\n  types: [ELEMENT_BLOCKQUOTE, ELEMENT_TODO_LI],\n  defaultType: ELEMENT_PARAGRAPH\n}\n\nexport const optionsResetBlockTypePlugin: ResetBlockTypePluginOptions = {\n  rules: [\n    {\n      ...resetBlockTypesCommonRule,\n      hotkey: 'Enter',\n      predicate: isBlockAboveEmpty\n    },\n    {\n      ...resetBlockTypesCommonRule,\n      hotkey: 'Backspace',\n      predicate: isSelectionAtBlockStart\n    }\n  ]\n}\n\nexport const optionsExitBreakPlugin: ExitBreakPluginOptions = {\n  rules: [\n    {\n      hotkey: 'mod+enter',\n      level: 1\n    },\n    {\n      hotkey: 'mod+shift+enter',\n      before: true,\n      level: 1\n    },\n    {\n      hotkey: 'enter',\n      query: {\n        start: true,\n        end: true,\n        allow: KEYS_HEADING\n      }\n    }\n  ]\n}\n\nexport const optionsSoftBreakPlugin: SoftBreakPluginOptions = {\n  rules: [\n    { hotkey: 'shift+enter' },\n    {\n      hotkey: 'enter',\n      query: {\n        allow: [ELEMENT_CODE_BLOCK, ELEMENT_BLOCKQUOTE, ELEMENT_TD]\n      }\n    }\n  ]\n}\n","import React, { useCallback, useState } from 'react'\n\ninterface Config {\n  model?: string\n  id?: string\n  value?: {}\n}\n\n// interface reactStyleAttr {\n//   textAlign?: 'left' | 'right' | 'center'\n//   color?: string\n// }\ninterface PageInfo {\n  state: any\n  page: number\n  headerAttribute: any\n  footerAttribute: any\n}\n\nlet configValue: Config = {}\n\nexport const getConfigValue = () => {\n  return configValue\n}\nexport const setConfigValue = (val: Config) => {\n  configValue = val\n}\n\nexport const ConfigContext = React.createContext<Config>({})\n\n// 分页信息的\nconst pageInfo: PageInfo = {\n  state: {},\n  page: 1,\n  headerAttribute: {\n    data: {\n      formatFunIndex: 0,\n      direction: 'center'\n    },\n    value: '',\n    showPage: false\n  },\n  footerAttribute: {\n    data: {\n      formatFunIndex: 0,\n      direction: 'center'\n    },\n    value: '',\n    showPage: false\n  }\n}\n\nexport const PageContext = React.createContext<PageInfo>(pageInfo)\n\nexport const PageDispatchContext = React.createContext<{\n  dispatchPageInfo(val: PageInfo): any\n  dispatchPageEidtor(val: any): any\n}>({\n  dispatchPageInfo: () => {},\n  dispatchPageEidtor: () => {}\n})\n\nexport const PageProvider = ({ children }: any) => {\n  const [data, setData] = useState<PageInfo>(pageInfo)\n\n  const dispatchPageEditInfo = useCallback((val) => {\n    console.log(val, '编辑器的数据')\n    // page 是顶级元素，只要进行一层遍历\n    let page = 0\n    for (let index = 0; index < val.length; index++) {\n      const element = val[index]\n      if (element.type === 'page') {\n        page += 1\n      }\n    }\n    // 计算page\n    setData((prev) => {\n      if (page === prev.page) return prev\n      return {\n        ...prev,\n        page: page\n      }\n    })\n  }, [])\n\n  const dispatchPageInfo = useCallback((val) => {\n    setData((prev) => {\n      return {\n        ...prev,\n        ...val\n      }\n    })\n  }, [])\n\n  return (\n    <PageContext.Provider value={data}>\n      <PageDispatchContext.Provider\n        value={{\n          dispatchPageInfo,\n          dispatchPageEidtor: dispatchPageEditInfo\n        }}\n      >\n        {children}\n      </PageDispatchContext.Provider>\n    </PageContext.Provider>\n  )\n}\n","interface pageStyleFunc {\n  (index: number, all: number): string\n}\n\nexport const pageOption: pageStyleFunc[] = [\n  (index) => {\n    return index + ''\n  },\n  (index) => {\n    return `-${index}-`\n  },\n  (index) => {\n    return ` ${index} `\n  },\n  (index) => {\n    return `第${index}页`\n  },\n  (index) => {\n    return `第${number2text(index)}页`\n  },\n  (index, all) => {\n    return `第${index}页 共${all}页`\n  },\n  (index, all) => {\n    return `第${number2text(index)}页 共${number2text(all)}页`\n  }\n]\n\n/**\n * @description 数字转中文数码\n *\n * @param {Number|String}   num     数字[正整数]\n * @param {String}          type    文本类型，lower|upper，默认lower\n *\n * @example number2text(100000000) => \"壹亿元整\"\n */\nconst number2text = (\n  number: Number | String,\n  type: 'lower' | 'upper' = 'lower'\n) => {\n  // 配置\n  const confs = {\n    lower: {\n      num: ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九'],\n      unit: ['', '十', '百', '千', '万'],\n      level: ['', '万', '亿']\n    },\n    upper: {\n      num: ['零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖'],\n      unit: ['', '拾', '佰', '仟'],\n      level: ['', '万', '亿']\n    },\n    maxNumber: 999999999999\n  }\n\n  // 过滤不合法参数\n  if (Number(number) > confs.maxNumber) {\n    console.error(\n      `The maxNumber is ${confs.maxNumber}. ${number} is bigger than it!`\n    )\n    return false\n  }\n\n  const conf = confs[type]\n  const integer = String(Number(number)).split('')\n\n  // 四位分级\n  const levels = integer.reverse().reduce((pre: any, item: any, idx) => {\n    let level = pre[0] && pre[0].length < 4 ? pre[0] : []\n    let value =\n      item === '0' ? conf.num[item] : conf.num[item] + conf.unit[idx % 4]\n    level.unshift(value)\n\n    if (level.length === 1) {\n      pre.unshift(level)\n    } else {\n      pre[0] = level\n    }\n\n    return pre\n  }, [])\n\n  // 整数部分\n  const _integer = levels.reduce(\n    (pre: String, item: Array<number>, idx: number) => {\n      let _level = conf.level[levels.length - idx - 1]\n      let _item = item.join('').replace(/(零)\\1+/g, '$1') // 连续多个零字的部分设置为单个零字\n\n      // 如果这一级只有一个零字，则去掉这级\n      if (_item === '零') {\n        _item = ''\n        _level = ''\n\n        // 否则如果末尾为零字，则去掉这个零字\n      } else if (_item[_item.length - 1] === '零') {\n        _item = _item.slice(0, _item.length - 1)\n      }\n\n      return pre + _item + _level\n    },\n    ''\n  )\n\n  // 如果是整数，则补个整字\n  return `${_integer}`\n}\n","import React, {\n  createRef,\n  useRef,\n  useEffect,\n  useState,\n  forwardRef,\n  useImperativeHandle,\n  useMemo,\n  useContext\n} from 'react'\nimport {\n  Tooltip,\n  Popover,\n  Form,\n  Input,\n  Button,\n  Radio,\n  Select,\n  Space\n} from 'antd'\nimport { PageContext, PageDispatchContext } from '../../env'\nimport { pageOption } from './formatting'\nconst { Option } = Select\nconst FormLayout = forwardRef(\n  ({ cancel, submit, initValue }: any, ref: React.Ref<unknown> | undefined) => {\n    const [form] = Form.useForm()\n    const selectOp = [\n      {\n        text: '1,2,3',\n        formatFunIndex: 0\n      },\n      {\n        text: '-1-,-2-,-3-',\n        formatFunIndex: 1\n      },\n      {\n        text: ' 1 , 2 , 3 ',\n        formatFunIndex: 2\n      },\n      {\n        text: '第1页',\n        formatFunIndex: 3\n      },\n      {\n        text: '第一页',\n        formatFunIndex: 4\n      },\n      {\n        text: '第1页 共x页',\n        formatFunIndex: 5\n      },\n      {\n        text: '第一页 共x页',\n        formatFunIndex: 6\n      }\n    ]\n    const raidoOp = [\n      {\n        img: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABkAgMAAABY7Z6ZAAAADFBMVEXi5u3////Axs89R1de/pOQAAAAO0lEQVQ4y2NYhQEYsAgtDUUDUXQQ+k+UUPwgFaJmSDCAAXWE6B+PDEiAUqFR14+6ftT1o0KDTIioWhQANqY3iwBuOv0AAAAASUVORK5CYII=',\n        name: '居左',\n        value: 'left'\n      },\n      {\n        img: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABkAgMAAABY7Z6ZAAAADFBMVEXi5u3////Axs89R1de/pOQAAAAO0lEQVQ4y2NYhQEYsAgtDUUDUfQS+k+UUPwgFaJSSDCAAXWE6B+PDEiAUqFR14+6ftT1o0KDTIioWhQALnI3iwaTK+sAAAAASUVORK5CYII=',\n        name: '居中',\n        value: 'center'\n      },\n      {\n        img: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABkAgMAAABY7Z6ZAAAADFBMVEXi5u3////Axs89R1de/pOQAAAAO0lEQVQ4y2NYhQEYsAgtDUUDUfQV+k+UUPwgFaI4JBjAgDpC9I9HBiRAqdCo60ddP+r6UaFBJkRULQoAJJo3i/rbBzgAAAAASUVORK5CYII=',\n        name: '居右',\n        value: 'right'\n      }\n    ]\n    useImperativeHandle(ref, () => ({\n      getFormData: () => {\n        return form.getFieldsValue()\n      }\n    }))\n    return (\n      <>\n        <Form initialValues={initValue} layout='horizontal' form={form}>\n          <Form.Item name='formatFunIndex' label='页码样式'>\n            <Select allowClear>\n              {selectOp.map((item) => {\n                return (\n                  <Option key={item.text} value={item.formatFunIndex}>\n                    {item.text}\n                  </Option>\n                )\n              })}\n            </Select>\n          </Form.Item>\n          <Form.Item label='页码位置' name='direction'>\n            <Radio.Group>\n              {raidoOp.map((item) => {\n                return (\n                  <Radio key={item.name} value={item.value}>\n                    <div>\n                      <img src={item.img} alt='' />\n                      <div style={{ textAlign: 'center' }}>{item.name}</div>\n                    </div>\n                  </Radio>\n                )\n              })}\n            </Radio.Group>\n          </Form.Item>\n          <Form.Item>\n            <Space>\n              <Button onClick={submit} type='primary'>\n                确认\n              </Button>\n              <Button onClick={cancel}>取消</Button>\n            </Space>\n          </Form.Item>\n        </Form>\n      </>\n    )\n  }\n)\n\nexport default function PageHeader({ top, index, isHeader, all }: any) {\n  const pageContext = useContext(PageContext)\n  const dataKey = isHeader ? 'headerAttribute' : 'footerAttribute'\n  const { dispatchPageInfo } = useContext(PageDispatchContext)\n  const context = pageContext[dataKey]\n  const direction = context.data.direction\n  const [state, setState] = useState(() => {\n    return {\n      current: false,\n      modelOpen: false\n    }\n  })\n  const inputRef = createRef<Input>()\n  const refForm = useRef(null)\n  const openButton = () => {\n    setState({\n      ...state,\n      current: true\n    })\n  }\n  const openInsert = () => {\n    console.log('openInsert')\n    setState({\n      ...state,\n      modelOpen: true\n    })\n  }\n\n  const cancel = () => {\n    console.log('cancel')\n    setState({\n      ...state,\n      modelOpen: false\n    })\n  }\n  const submit = () => {\n    // 关闭弹窗 插入页码 或者修改页码\n    setState({\n      ...state,\n      modelOpen: false\n    })\n    // 修改页码展示信息\n    syncContext(true)\n  }\n  const exit = () => {\n    setState({\n      ...state,\n      current: false,\n      modelOpen: false\n    })\n    syncContext()\n  }\n  const setText = (val: string) => {\n    dispatchPageInfo({\n      ...pageContext,\n      [dataKey]: {\n        ...context,\n        value: val\n      }\n    })\n  }\n  const delInsert = () => {\n    console.log('del删除页码')\n    dispatchPageInfo({\n      ...pageContext,\n      [dataKey]: {\n        ...context,\n        showPage: false\n      }\n    })\n  }\n  const syncContext = (showPage?: boolean) => {\n    const formData = refForm.current && (refForm.current as any).getFormData()\n    const obj = {\n      ...context,\n      data: formData || context.data,\n      showPage: !!showPage || context.showPage\n    }\n    dispatchPageInfo({ ...pageContext, [dataKey]: obj })\n  }\n  const dialogContenet = (\n    <FormLayout\n      cancel={cancel}\n      ref={refForm}\n      submit={submit}\n      initValue={context.data}\n    ></FormLayout>\n  )\n  const { current, modelOpen } = state\n  const handleVisibleChange: (v: boolean) => void = (visible) => {\n    console.log(visible, 'visible')\n    setState({ ...state, modelOpen: !!visible })\n  }\n  const pageText = useMemo(() => {\n    const findex = context.data.formatFunIndex\n    const fn = pageOption[findex]\n    const text = fn(index, all)\n    console.log(text, 'is text')\n    return text\n  }, [index, all, context])\n  useEffect(() => {\n    if (current && inputRef.current) {\n      inputRef.current.focus()\n    }\n  }, [current, inputRef])\n\n  return (\n    <div\n      className='page-input-warp'\n      style={{\n        top: top\n      }}\n    >\n      <Tooltip placement='top' title={state.current ? '' : '双击编辑页眉'}>\n        <div className='page-input-model'>\n          <div className='header-com'>\n            <span\n              className='page-header-value'\n              onDoubleClick={openButton}\n              style={{ userSelect: 'none' }}\n            >\n              <Input\n                ref={inputRef}\n                disabled={!state.current}\n                bordered={false}\n                value={context.value}\n                onChange={(e) => {\n                  setText(e.target.value)\n                }}\n              ></Input>\n            </span>\n          </div>\n          <div\n            style={{\n              position: 'absolute',\n              top: isHeader ? 40 + 'px' : -40 + 'px'\n            }}\n          >\n            {state.current ? (\n              <Space>\n                <Popover\n                  placement='topLeft'\n                  content={dialogContenet}\n                  visible={modelOpen}\n                  trigger='click'\n                  onVisibleChange={handleVisibleChange}\n                >\n                  <Button onClick={openInsert}>\n                    {context.showPage ? '页码设置' : '插入页码'}\n                  </Button>\n                </Popover>\n                {context.showPage ? (\n                  <Button onClick={delInsert}>删除页码</Button>\n                ) : null}\n                <Button onClick={exit}>退出编辑</Button>\n              </Space>\n            ) : null}\n          </div>\n          {context.showPage ? (\n            <div\n              className='page-header-page-text'\n              style={{ textAlign: direction }}\n            >\n              {pageText}\n            </div>\n          ) : null}\n        </div>\n      </Tooltip>\n    </div>\n  )\n}\n","import React, { useContext } from 'react'\n\nimport { PageContext } from '../../env'\nimport PageHeader from './Pageheader'\n\n// 一页的高度  用于计算位置\nconst pageHeight = 1122\n// const pageToolHeight = 0\nconst pageToolHeight = 60\nconst selfHeight = 44\n\nexport default function Paging() {\n  const data = useContext(PageContext)\n  const arrs = new Array(data.page).fill('')\n\n  return (\n    <div className='paging-com'>\n      {arrs.map((v, index) => {\n        return (\n          <div key={'page-warp' + index}>\n            {/* <InputDiv\n              style={{\n                top: index * pageHeight + pageToolHeight + 'px'\n              }}\n              changeValue={changeHeader}\n              page={index + 1}\n              value={data.headerValue}\n              placeholder={'点击输入页眉'}\n            ></InputDiv> */}\n            {/* <div\n              className='page-input-warp'\n              style={{\n                top: index * pageHeight + pageToolHeight + 'px'\n              }}\n            ></div> */}\n            <PageHeader\n              top={index * pageHeight + pageToolHeight + 'px'}\n              index={index + 1}\n              all={arrs.length}\n              isHeader={true}\n            ></PageHeader>\n            <PageHeader\n              top={\n                (index + 1) * pageHeight + pageToolHeight - selfHeight + 'px'\n              }\n              index={index + 1}\n              all={arrs.length}\n            ></PageHeader>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n","export default [\n  {\n    type: 'page',\n    children: [\n      { type: 'h1', children: [{ text: '🍪 Deserialize HTML' }] },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        children: [\n          {\n            text: \"By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      { type: 'p', id: 1632885175785, children: [{ text: '' }] }\n    ]\n  },\n  {\n    type: 'page',\n    children: [\n      { type: 'p', id: 1632885176322, children: [{ text: '2' }] },\n      {\n        type: 'p',\n        id: 1632885177381,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885177906,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885178407,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885178798,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885179212,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885179628,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885180103,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885180501,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885180937,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885181373,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      { type: 'p', id: 1632885181979, children: [{ text: '' }] },\n      {\n        type: 'p',\n        id: 1632885182254,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      {\n        type: 'p',\n        id: 1632885183211,\n        children: [\n          { text: 'handle ' },\n          { text: \"'text/html'\", code: true },\n          {\n            text: \" data. By default, pasting content into a Slate editor will use the clipboard's \"\n          },\n          { text: \"'text/plain'\", code: true },\n          {\n            text: \" data. That's okay for some use cases, but sometimes you want users to be able to paste in content and have it maintain its formatting. To do this, your editor needs to handle \"\n          },\n          { text: \"'text/html'\", code: true },\n          { text: ' data. ' }\n        ]\n      },\n      { type: 'p', id: 1632885184229, children: [{ text: '' }] },\n      { type: 'p', id: 1632885184742, children: [{ text: '3' }] }\n    ],\n    id: 1632885176399\n  }\n]\n","/* eslint-disable no-console */\nimport React, { useEffect, useMemo, useState, useRef, useContext } from 'react'\nimport {\n  Plate,\n  createReactPlugin,\n  createHistoryPlugin,\n  createParagraphPlugin,\n  // createBlockquotePlugin,\n  createItalicPlugin,\n  createStrikethroughPlugin,\n  createCodePlugin,\n  createUnderlinePlugin,\n  createBoldPlugin,\n  createTablePlugin,\n  createSuperscriptPlugin,\n  createHighlightPlugin,\n  createSubscriptPlugin,\n  createTodoListPlugin,\n  createKbdPlugin,\n  // createNormalizeTypesPlugin,\n  // createTrailingBlockPlugin,\n  createSelectOnBackspacePlugin,\n  createDeserializeHTMLPlugin,\n  createAlignPlugin,\n  createExitBreakPlugin,\n  ExitBreakPluginOptions,\n  createNodeIdPlugin,\n  createListPlugin,\n  createHeadingPlugin,\n  // createCodeBlockPlugin,\n  ELEMENT_PARAGRAPH,\n  // ELEMENT_H1,\n  KEYS_HEADING,\n  // ELEMENT_H2,\n  ELEMENT_TD,\n  ELEMENT_IMAGE,\n  ELEMENT_BLOCKQUOTE,\n  ELEMENT_CODE_BLOCK,\n  // ELEMENT_CODE_LINE,\n  ELEMENT_TODO_LI,\n  // CodeBlockElement,\n  // 搜索插件\n  // useFindReplacePlugin,\n  // MARK_BOLD,\n  // withPlaceholders,\n  createPlateOptions,\n  // createSlatePluginsComponents,\n  // withProps,\n  ResetBlockTypePluginOptions,\n  isBlockAboveEmpty,\n  isSelectionAtBlockStart,\n  createResetNodePlugin,\n  createSoftBreakPlugin,\n  SoftBreakPluginOptions\n  // createAutoformatPlugin,\n  // useStoreState\n} from '@udecode/plate'\nimport { useStoreEditorRef, useEventEditorStore } from '@udecode/plate-core'\nimport { useReactToPrint } from 'react-to-print'\nimport { ReactEditor } from 'slate-react'\nimport { Transforms, Editor as slateEditor } from 'slate'\nimport useStyledComponents from './styledComponents'\nimport { HeadingToolbar } from '@udecode/plate-toolbar'\nimport {\n  ToolbarButtonsBasicElements,\n  BallonToolbarMarks,\n  ToolbarButtonsAlign,\n  ToolbarButtonsTable,\n  ToolbarButtonsList,\n  ToolbarButtonsBasicMarks\n} from './newplugin'\n\n// markdown语法支持\n// import { optionsAutoformat } from './autoformatRules'\n// import DominInput from './components/domin/input'\n\nimport {\n  optionsResetBlockTypePlugin,\n  optionsExitBreakPlugin,\n  optionsSoftBreakPlugin\n} from './config/pluginOptions'\nimport { ConfigContext, PageDispatchContext, PageProvider } from './env'\nimport { createPagePlugin } from './plugins/page'\nimport Paging from './components/paging/index'\nimport initData from './initData'\nconst RichText = ({ config, eventBus }: any) => {\n  const { model: modelenv, id } = config\n  const componentRef = useRef(null)\n  const handlePrint = useReactToPrint({\n    content: () => componentRef.current,\n    removeAfterPrint: false\n  })\n\n  useEffect(() => {\n    ;(window as any).handlePrint = handlePrint\n  }, [handlePrint])\n\n  // const Tootip = useMemo(() => {\n  //   return modelenv === 'read' ? null : <BallonToolbarMarks />\n  // }, [modelenv])\n\n  return (\n    <div\n      ref={componentRef}\n      className={\n        modelenv === 'read'\n          ? 'readmodel-editor slate-editor-core'\n          : 'slate-editor-core'\n      }\n    >\n      <PageProvider>\n        <Editor id={config.id} />\n        <Paging></Paging>\n      </PageProvider>\n    </div>\n  )\n}\n\nconst Editor = ({ id }: any) => {\n  const initialValuePasteHtml: any = initData\n  const styledComponents = useStyledComponents()\n\n  const defaultOptions = createPlateOptions()\n  const pluginsMemo = useMemo(() => {\n    const plugins = [\n      createReactPlugin(),\n      createHistoryPlugin(),\n      createParagraphPlugin(),\n      // createBlockquotePlugin(),\n      createTodoListPlugin(),\n      createHeadingPlugin(),\n      createListPlugin(),\n      createPagePlugin(),\n      createTablePlugin(),\n      // createCodeBlockPlugin(),\n      createAlignPlugin(),\n      createBoldPlugin(),\n      createCodePlugin(),\n      createItalicPlugin(),\n      createHighlightPlugin(),\n      createUnderlinePlugin(),\n      createStrikethroughPlugin(),\n      createSubscriptPlugin(),\n      createSuperscriptPlugin(),\n      // 键盘监听\n      createKbdPlugin(),\n      createNodeIdPlugin(),\n      // markdown语法支持\n      // createAutoformatPlugin(optionsAutoformat),\n      // 设置默认模块\n      createResetNodePlugin(optionsResetBlockTypePlugin),\n      // 软换行\n      createSoftBreakPlugin(optionsSoftBreakPlugin),\n      // 退出当前块\n      createExitBreakPlugin(optionsExitBreakPlugin),\n      // 强制布局\n      // createNormalizeTypesPlugin({\n      //   rules: [{ path: [0, 0], strictType: ELEMENT_H1 }],\n      // }),\n      // createTrailingBlockPlugin({\n      //   type: ELEMENT_PARAGRAPH,\n      //   level: 1,\n      // }),\n      createSelectOnBackspacePlugin({ allow: ELEMENT_IMAGE })\n    ]\n    // 处理html文本插入\n    plugins.push(createDeserializeHTMLPlugin({ plugins }))\n\n    return plugins\n  }, [])\n  const { dispatchPageEidtor } = useContext(PageDispatchContext)\n  const editor = useStoreEditorRef()\n  let [value, setValue] = useState<any>(initialValuePasteHtml)\n  const editableProps = {\n    // placeholder: 'Type…',\n    style: {\n      width: '794px',\n      minHeight: '500px',\n      outline: '1px solid rgb(238, 238, 238)'\n    }\n  }\n  useEffect(() => {\n    dispatchPageEidtor(value)\n  }, [])\n  return (\n    // <ConfigContext.Provider value={config}>\n    <Plate\n      id={id}\n      plugins={pluginsMemo}\n      onChange={(val) => {\n        console.log(val)\n        editor && slateEditor.normalize(editor)\n        dispatchPageEidtor(val)\n        // setValue(val)\n        // pubInstance.publish('update', val)\n      }}\n      components={styledComponents}\n      options={defaultOptions}\n      editableProps={editableProps}\n      initialValue={value}\n    >\n      <HeadingToolbar styles={{ root: { margin: '0px -20px 0' } }}>\n        <ToolbarButtonsBasicElements />\n        <ToolbarButtonsList />\n        <ToolbarButtonsBasicMarks />\n        <ToolbarButtonsAlign />\n        <ToolbarButtonsTable />\n      </HeadingToolbar>\n      <BallonToolbarMarks></BallonToolbarMarks>\n    </Plate>\n    // </ConfigContext.Provider>\n  )\n}\n\nexport default RichText\n","import { getRenderElement, PlatePlugin } from '@udecode/plate-core'\nimport { ELEMENT_PAGE } from './defaults'\nimport { withPage } from './withPage'\n\n/**\n * Enables support for hyperlinks.\n */\nexport const createPagePlugin = (): PlatePlugin => ({\n  pluginKeys: ELEMENT_PAGE,\n  renderElement: getRenderElement(ELEMENT_PAGE),\n  withOverrides: withPage()\n})\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'antd/dist/antd.css'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App config={{ model: 'desc', id: 'udos' }} />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}